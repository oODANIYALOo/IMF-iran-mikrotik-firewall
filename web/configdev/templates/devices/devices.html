{% extends 'parent/base.html' %}

{% block title %}Device Manager{% endblock %}

{% block content %}
<div class="status-card animate-slide-in">

    <h2 class="dashboard-title">Device List</h2>

    <table>
        <tr>
            <th>#</th>
            <th>Device Entry</th>
            <th>Action</th>
        </tr>

        {% for line in devices %}
            {% if line and "No hosts found" not in line and "Usage:" not in line %}
            <tr>
                <td>{{ line|slice:":1" }}</td>
                <td>{{ line }}</td>
                <td>
                    <form method="post">
                        {% csrf_token %}
                        <input type="hidden" name="action" value="delete">
                        <input type="hidden" name="target" value="{{ line|slice:':1' }}">
                        <button class="btn-secondary" type="submit">Delete</button>
                    </form>
                </td>
            </tr>
            {% endif %}
        {% empty %}
            <tr><td colspan="3">No devices found.</td></tr>
        {% endfor %}
    </table>

    <hr>

    <h3 class="dashboard-title">Add Device</h3>

    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="action" value="add">

        <label>IP:</label>
        <input type="text" name="ip" required>

        <label>User:</label>
        <input type="text" name="user" required>

        <label>Password:</label>
        <input type="text" name="password" required>

        <button class="btn-primary" type="submit">Add</button>
    </form>
</div>
{% endblock %}
